<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Prueba Firebase</title>
</head>
<body>
<h2>Login de prueba Firebase</h2>

<form id="loginForm">
  <input type="email" id="email" placeholder="Correo electrónico" required><br><br>
  <input type="password" id="password" placeholder="Contraseña" required><br><br>
  <button type="submit">Entrar</button>
</form>

<div id="status"></div>

<!-- Firebase Scripts -->
<script src="https://www.gstatic.com/firebasejs/10.21.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/10.21.0/firebase-auth-compat.js"></script>

<script>
  // Configuración de Firebase
  const firebaseConfig = {
      apiKey: "AIzaSyBoydNR1cXmBofeMnNgEQ1ozBPC2sA_I1k",
      authDomain: "torneo-3x3-sara-roces.firebaseapp.com",
      projectId: "torneo-3x3-sara-roces",
      storageBucket: "torneo-3x3-sara-roces.firebasestorage.app",
      messagingSenderId: "425149115596",
      appId: "1:425149115596:web:0231d2ec84af97b072a669",
      measurementId: "G-4J28ZHSKCS"
  };

  // Inicializa Firebase solo si no está inicializado
  if (!firebase.apps.length) {
      firebase.initializeApp(firebaseConfig);
  }

  const auth = firebase.auth();
  const statusDiv = document.getElementById('status');

  // Detecta cambios en el estado de autenticación
  auth.onAuthStateChanged(user => {
      if (user) {
          statusDiv.innerText = "Usuario logueado: " + user.email;
          console.log("Usuario logueado:", user.email);
      } else {
          statusDiv.innerText = "No hay usuario logueado";
          console.log("No hay usuario logueado");
      }
  });

  // Manejar login
  document.getElementById('loginForm').addEventListener('submit', async (e) => {
      e.preventDefault();
      const email = document.getElementById('email').value;
      const password = document.getElementById('password').value;

      try {
          await auth.signInWithEmailAndPassword(email, password);
      } catch (error) {
          alert("Error: " + error.message);
          console.error(error);
      }
  });
</script>

</body>
</html>
